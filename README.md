# План лекций по SQL

### **Лекция 1: Введение в SQL и реляционные базы данных**

**Цель**: Ознакомить с основами SQL и реляционными базами данных. Понять, как работают реляционные базы данных и для чего они нужны.

**Темы**:

1. **Что такое реляционная база данных?**
   - Основные элементы: таблицы, строки, столбцы.
2. **Что такое SQL?**
   - Роль SQL в работе с данными.
3. **Зачем менеджеру знать SQL?**
   - Примеры практических задач.
4. **Подключение к базе данных через SQL-клиент.**
5. **Структура базы данных:**
   - Пример структуры (например, таблицы `users`, `products`, `orders`, `transactions`).

**Практика**:

1. Подключение к базе данных.
2. Просмотр списка таблиц и первых 5 строк из каждой таблицы (например, `SELECT * FROM users LIMIT 5`).

---

### **Лекция 2: Основы SELECT — Извлечение данных**

**Цель**: Научить базовым операциям извлечения данных.

**Темы**:

1. **Синтаксис `SELECT`:**
   - Основы формирования запросов для извлечения данных из таблицы.
2. **Выбор всех данных — `SELECT *`:**
   - Извлечение всех столбцов из таблицы.
3. **Выбор определённых столбцов:**
   - Извлечение только нужных данных, указав конкретные столбцы.
4. **Псевдонимы для столбцов — `AS`:**
   - Использование псевдонимов для улучшения читаемости вывода.
5. **Фильтрация данных с помощью `WHERE`:**
   - Основы работы с условиями фильтрации.
6. **Ограничение результатов с помощью `LIMIT`:**
7. **Сортировка данных — `ORDER BY`:**
   - Основы сортировки (по возрастанию и убыванию).

**Практика**:

1. Извлечение данных о пользователях или товарах.
2. Извлечение только нужных столбцов (например, имена и цены).
3. Использование псевдонимов для улучшения представления данных.
4. Применение сортировки и ограничения по результатам.

---

### **Лекция 3: Фильтрация данных — WHERE**

**Цель**: Научить фильтровать данные с использованием `WHERE`, логических операторов и обработки `NULL`.

**Темы**:

1. **Оператор `WHERE`:**
   - Основы фильтрации данных по различным критериям.
2. **Условия сравнения:**
   - Операторы: `=`, `<>`, `>`, `<`, `>=`, `<=`.
3. **Логические операторы:**
   - Использование `AND`, `OR`, `NOT` для комбинирования условий.
4. **Работа с `NULL`:**
   - Что такое `NULL` и как с ним работать.
   - Использование `IS NULL` и `IS NOT NULL`.
5. **Приоритет операций и комбинирование условий.**

**Практика**:

1. Найти товары с ценой выше определенной суммы.
2. Составить запрос для отображения заказов, сделанных в определенный период.
3. Найти пользователей без телефонного номера.

---

### **Лекция 4: Сортировка данных — ORDER BY, GROUP BY и HAVING**

**Цель**: Научить сортировать и группировать данные, а также фильтровать их после агрегации.

**Темы**:

1. **Сортировка данных с `ORDER BY`:**
   - Сортировка по возрастанию и убыванию.
2. **Сортировка по нескольким столбцам.**
3. **Группировка данных с `GROUP BY`:**
   - Основы группировки.
4. **Фильтрация сгруппированных данных с `HAVING`:**
   - Сравнение с `WHERE`.
5. **Пример использования `ORDER BY`, `GROUP BY` и `HAVING`.**

**Практика**:

1. Сортировка пользователей по дате регистрации (по убыванию).
2. Вывод топ-5 самых дорогих товаров.
3. Ограничение количества заказов по определенному критерию (например, первая или последняя дата).
4. Группировка товаров по признакам и подсчет количества групп.
5. Нахождение категорий товаров с средней ценой выше определенного значения.

---

### **Лекция 5: Агрегатные функции — COUNT, SUM, AVG, MIN, MAX**

**Цель**: Изучить основные агрегатные функции для анализа данных.

**Темы**:

1. **Основные агрегатные функции:**
   - `COUNT()`, `SUM()`, `AVG()`, `MIN()`, `MAX()`.
2. **Группировка данных с `GROUP BY`:**
   - Использование агрегатных функций после группировки.
3. **Введение в использование агрегатных функций в отчетности.**

**Практика**:

1. Вычисление общей суммы заказов.
2. Нахождение самого дешевого и самого дорогого товара.

---

### **Лекция 6: Объединение таблиц — JOIN**

**Цель**: Научить соединять данные из нескольких таблиц с помощью `JOIN`.

**Темы**:

1. **Основные типы объединений:**
   - `INNER JOIN`, `LEFT JOIN`, `RIGHT JOIN`, `FULL JOIN`.
2. **Использование `ON` для указания условий соединения.**
3. **Использование `USING` вместо `ON`.**
4. **Пример использования `JOIN` для объединения таблиц товаров и заказов.**

**Практика**:

1. Соединение таблиц `counteragents` и `orders`, чтобы показать, какие товары были в заказах.

---

### **Лекция 7: Подзапросы, вложенные запросы и CTE**

**Цель**: Научить использовать подзапросы, вложенные запросы и CTE для более эффективной работы с данными, улучшая читаемость и повторное использование запросов.

**Темы**:

1. **Подзапросы:**
   - Основы использования подзапросов.
2. **Вложенные подзапросы.**
3. **Common Table Expressions (CTE):**
   - Синтаксис и использование.
4. **Сравнение подзапросов и CTE.**

**Практика**:

1. Подсчет количества заказов каждого пользователя с использованием подзапроса.
2. Нахождение продуктов, которые чаще всего заказываются, с использованием подзапросов в `WHERE`.

---

### **Лекция 8: Работа с датами и временными интервалами**

**Цель**: Научить работать с временными данными и интервалами времени.

**Темы**:

1. **Форматирование дат и времени.**
2. **Использование функций для работы с датами:**
   - `CURRENT_DATE`, `DATE_TRUNC`, `EXTRACT`.
3. **Фильтрация по дате и времени:**
   - Например, заказы за последний месяц.

**Практика**:

1. Поиск всех заказов за последний месяц.
2. Создание отчета по продажам за квартал.
3. Вывод пользователей, зарегистрировавшихся в последние 7 дней.

---

### **Лекция 9: Оконные функции**

**Цель**: Изучить оконные функции для выполнения сложной аналитики без агрегации.

**Темы**:

1. **Что такое оконные функции?**
   - Разница между агрегатными и оконными функциями;
   - Понятие окна.
2. **Синтаксис оконных функций:**
   - `OVER()`, `PARTITION BY`, `ORDER BY`.
3. **Типы оконных функций:**
   - `ROW_NUMBER()`, `RANK()`, `DENSE_RANK()`, `NTILE()`, агрегатные оконные функции (`SUM() OVER()`, `AVG() OVER()`).
4. **Пример использования оконных функций:**
   - Вычисление ранга и суммирование по категориям.

**Практика**:

1. Использование оконной функции `ROW_NUMBER()` для нумерации строк в таблице.
2. Использование `SUM() OVER()` для вычисления накопительных сумм по заказам.
3. Применение `RANK()` для присвоения рангов пользователям в зависимости от количества заказов.

---

Теперь структура лекций стала более однородной и логичной. Подпункты унифицированы, и последовательность представления тем сохраняет единообразие.