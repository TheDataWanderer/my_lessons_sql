# План лекций по SQL

### **Лекция 1: Введение в SQL и реляционные базы данных**

**Цель**: Ознакомить с основами SQL и базами данных. Понять, как работают реляционные базы данных и для чего они нужны.

**Темы**:

- Что такое реляционная база данных? Основные элементы: таблицы, строки, столбцы.
- Что такое SQL? Почему это важный инструмент для работы с данными.
- Зачем менеджеру знать SQL? Примеры практических задач.
- Обзор PostgreSQL и базового интерфейса работы с ним.
- Подключение к базе данных через SQL-клиент.
- Структура базы данных (например, `users`, `products`, `orders`, `transactions`).

**Практика**:

- Подключение к базе данных.
- Просмотр списка таблиц и первых 5 строк из каждой таблицы (например, `SELECT * FROM users LIMIT 5`).

---

### **Лекция 2: Основы SELECT — Извлечение данных**

**Цель**: Научить базовым операциям извлечения данных.

**Темы**:

- **Синтаксис `SELECT`**: Основы формирования запросов для извлечения данных из таблицы.
- **Выбор всех данных — `SELECT *`**: Извлечение всех столбцов из таблицы.
- **Выбор определённых столбцов**: Извлечение только нужных данных, указав конкретные столбцы.
- **Псевдонимы для столбцов — `AS`**: Использование псевдонимов для улучшения читаемости вывода.
- **Фильтрация данных по условиям** — `WHERE` (кратко)
- **Работа с `LIMIT`** (ограничение результата)
- **Работа с сортировкой — `ORDER BY`** (если останется время)

**Практика**:

- Извлечение данных о пользователях или товарах.
- Извлечение только необходимых столбцов (например, имена и цены).
- Использование псевдонимов для улучшения представления данных.

---

### **Лекция 3: Фильтрация данных — WHERE**

**Цель**: Научить фильтровать данные с использованием `WHERE`, логических операторов и обработки `NULL`.

**Темы**:

- **Оператор `WHERE`**: основы фильтрации данных по различным критериям.
    - Условия сравнения: `=`, `<>`, `>`, `<`, `>=`, `<=`.
    - Логические операторы: `AND`, `OR`, `NOT` для комбинирования условий.
- **Работа с `NULL`**:
    - Что такое `NULL` в базе данных (отсутствие значения).
    - Использование `IS NULL` и `IS NOT NULL` для проверки пустых значений.
    - Пример: выбор всех пользователей без телефонного номера.
- **Логические операторы в фильтрации**:
    - Пример использования `AND`, `OR` и `NOT` для более сложных условий. **Приоритет операций**
    - Как комбинировать несколько условий для фильтрации данных (например, найти пользователей из определенного города с определенным статусом).

**Практика**:

- Выбрать пользователей из конкретного города или страны.
- Найти продукты с ценой выше определенной суммы.
- Составить запрос для отображения заказов, сделанных в определенный период.

---

### **Лекция 4: Сортировка данных — ORDER BY, GROUP BY и HAVING**

**Цель**: Научить сортировать. Понять, как группировать данные и фильтровать их после агрегации.

**Темы**:

- Оператор `ORDER BY` (по возрастанию и убыванию).
- Сортировка по нескольким столбцам.
- Использование `GROUP BY` для группировки данных.
- Фильтрация сгруппированных данных с помощью `HAVING`.
- Сравнение с фильтрацией в `WHERE`.

**Практика**:

- Сортировка пользователей по дате регистрации (по убыванию).
- Вывод топ-5 самых дорогих товаров.
- Ограничение количества выводимых заказов по определенному критерию. (получить первую или последнюю дату)
-  Группировка пользователей по регионам и подсчет количества заказов.
- Вычисление средней суммы заказа по каждому продукту.
- Нахождение категорий товаров, у которых средняя цена выше определенного значения.

---

### **Лекция 5: Агрегатные функции — COUNT, SUM, AVG, MIN, MAX**

**Цель**: Изучить основные агрегатные функции для анализа данных.

**Темы**:

- Агрегатные функции: `COUNT()`, `SUM()`, `AVG()`, `MIN()`, `MAX()`.
- Группировка данных с помощью `GROUP BY`.
- Введение в использование агрегатных функций в отчетности.

**Практика**:

- Подсчет количества пользователей, сделавших покупку.
- Вычисление общей суммы заказов и среднего чека.
- Нахождение самого дешевого и самого дорогого продукта.

---

### **Лекция 6: Объединение таблиц — JOIN**

**Цель**: Научить соединять данные из нескольких таблиц с помощью `JOIN`.

**Темы**:

- Основные типы объединений: `INNER JOIN`, `LEFT JOIN`, `RIGHT JOIN`, `FULL JOIN`.
- Пример использования `JOIN` для объединения таблиц пользователей и заказов.
- Использование `ON` для указания условий соединения.

**Практика**:

- Соединение таблиц `users` и `orders`, чтобы показать, какие пользователи сделали какие заказы.
- Составление запроса для получения всех продуктов и их поставщиков, соединяя таблицы `products` и `suppliers`.

---

### **Лекция 7: Подзапросы и вложенные запросы**

**Цель**: Ознакомить с использованием подзапросов для сложных аналитических задач.

**Темы**:

- Что такое подзапросы и когда их использовать.
- Вложенные подзапросы в `SELECT`, `FROM`, `WHERE`.
- Пример использования подзапросов для фильтрации или вычислений.

**Практика**:

- Подсчет количества заказов каждого пользователя, используя подзапрос.
- Нахождение продуктов, которые чаще всего заказываются, используя подзапрос в `WHERE`.

---

### **Лекция 8: Работа с датами и временными интервалами**

**Цель**: Научить работать с временными данными и интервалами времени.

**Темы**:

- Форматирование дат и времени.
- Использование функций для работы с датами: `CURRENT_DATE`, `DATE_TRUNC`, `EXTRACT`.
- Фильтрация по дате и времени (например, заказы за последний месяц).

**Практика**:

- Поиск всех заказов за последний месяц.
- Создание отчета по продажам за квартал.
- Вывод пользователей, зарегистрировавшихся в последние 7 дней.

### **Лекция 9: Оконные функции**

**Цель**: Изучить оконные функции для выполнения сложной аналитики без агрегации.

**Темы**:

- **Что такое оконные функции?** Разница между агрегатными функциями и оконными.
- **Синтаксис оконных функций**: `OVER()`, `PARTITION BY`, `ORDER BY`.
- **Типы оконных функций**: `ROW_NUMBER()`, `RANK()`, `DENSE_RANK()`, `NTILE()`, агрегатные оконные функции (например, `SUM() OVER()`, `AVG() OVER()`).
- Пример использования оконных функций для вычисления ранга и суммирования по категориям.

**Практика**:

- Использование оконной функции `ROW_NUMBER()` для нумерации строк в таблице.
- Использование `SUM() OVER()` для вычисления накопительных сумм по заказам.
- Применение `RANK()` для присвоения рангов пользователям в зависимости от количества заказов.

---

### **Лекция 10: Работа с датами и временными интервалами**

**Цель**: Научить работать с временными данными и интервалами времени.

**Темы**:

- **Форматирование дат и времени**: Работа с типами данных для времени и даты.
- **Использование функций для работы с датами**: `CURRENT_DATE`, `DATE_TRUNC`, `EXTRACT`.
- **Фильтрация по дате и времени**: Фильтрация данных по последнему месяцу, кварталу, году.

**Практика**:

- Поиск всех заказов за последний месяц.
- Создание отчёта по продажам за квартал.
- Вывод пользователей, зарегистрировавшихся в последние 7 дней.